<!DOCTYPE html>
<html>
	<head>
		<meta
			http-equiv="Content-Type"
			content="text/html; charset=windows-1252"
		/>
		<meta name="apple-mobile-web-app-capable" content="yes" />

		<title>HTML Editor</title>

		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}
			html,
			body {
				overflow: hidden;
				background-color: black;
			}

			framesetcontainer,
			htmlEditContainer,
			.html-edit,
			.html-preview {
				width: 100vw;
				height: 100vh;
			}

			.html-preview-overlay {
				width: 100vw;
				height: 100vh;
				position: absolute;
				left: 0;
				top: 0;
				z-index: 1000;
			}

			iframe {
				border: 0;
				margin: 0;
				padding: 0;
			}

			.hide {
				visibility: hidden;
				display: none;
			}
			.show {
				visibility: visible;
			}
		</style>

		<script type="text/javascript">
			function init() {
				addFrameset();
				addGestures();
			}

			function addGestures() {
				var touchstartX = 0;
				var touchstartY = 0;
				var touchendX = 0;
				var touchendY = 0;

				var gestureZone = document.getElementsByTagName(
					"framesetcontainer"
				)[0];

				gestureZone.addEventListener(
					"touchstart",
					function (event) {
						touchstartX = event.changedTouches[0].screenX;
						touchstartY = event.changedTouches[0].screenY;
					},
					false
				);

				gestureZone.addEventListener(
					"touchend",
					function (event) {
						touchendX = event.changedTouches[0].screenX;
						touchendY = event.changedTouches[0].screenY;
						handleGesture();
					},
					false
				);
			}

			function handleGesture() {
				if (touchendX < touchstartX) {
					alert("Swiped left");
				}

				if (touchendX > touchstartX) {
					alert("Swiped right");
				}

				if (touchendY < touchstartY) {
					alert("Swiped up");
				}

				if (touchendY > touchstartY) {
					alert("Swiped down");
				}

				if (touchendY === touchstartY) {
					alert("Tap");
				}
			}

			function showHide() {
				if (this.classList.contains("html-edit")) {
					if (this.value !== "") {
						this.parentElement.querySelector(".html-preview").src =
							"data:text/html;charset=utf-8," +
							escape(this.value);

						if (this.classList.contains("show")) {
							this.classList.remove("show");
							this.classList.add("hide");
						} else {
							this.classList.remove("hide");
							this.classList.add("show");
						}

						this.parentElement
							.querySelector(".html-preview")
							.classList.remove("hide");
						this.parentElement
							.querySelector(".html-preview")
							.classList.add("show");
						this.parentElement
							.querySelector(".html-preview-overlay")
							.classList.remove("hide");
						this.parentElement
							.querySelector(".html-preview-overlay")
							.classList.add("show");
					}
				} else if (this.classList.contains("html-preview-overlay")) {
					if (this.classList.contains("show")) {
						this.parentElement
							.querySelector(".html-preview")
							.classList.add("hide");
						this.parentElement
							.querySelector(".html-preview")
							.classList.remove("show");
						this.parentElement
							.querySelector(".html-preview-overlay")
							.classList.add("hide");
						this.parentElement
							.querySelector(".html-preview-overlay")
							.classList.remove("show");

						this.parentElement
							.querySelector(".html-edit")
							.classList.remove("hide");
						this.parentElement
							.querySelector(".html-edit")
							.classList.add("show");
					}
				}
			}

			function addFrameset() {
				if (document.getElementsByTagName("htmlEditContainer").length) {
					document.getElementsByTagName(
						"htmlEditContainer"
					).style.visibility = "hidden";
				}

				var framesetCurrentCount = document.getElementsByTagName(
					"htmlEditContainer"
				).length;

				var htmlEditContainer = document.createElement(
					"htmlEditContainer"
				);

				var txtHtmlEditId = "txtHtmlEdit" + framesetCurrentCount + 1;
				var textarea = document.createElement("textarea");
				textarea.id = txtHtmlEditId;
				textarea.className = "html-edit show";
				textarea.ondblclick = showHide;
				htmlEditContainer.appendChild(textarea);

				var frmHtmlPreviewId =
					"frmHtmlPreview" + framesetCurrentCount + 1;
				var iframe = document.createElement("iframe");
				iframe.id = frmHtmlPreviewId;
				//iframe.src = '"javascript:&#39;&#39;;"';
				iframe.className = "html-preview hide";
				//iframe.ondblclick = showHide;
				htmlEditContainer.appendChild(iframe);

				var frmOverlayId = "frmOverlay" + framesetCurrentCount + 1;
				var frmOverlay = document.createElement("frmOverlay");
				frmOverlay.id = frmOverlayId;
				frmOverlay.className = "html-preview-overlay hide";
				frmOverlay.ondblclick = showHide;
				htmlEditContainer.appendChild(frmOverlay);

				document
					.getElementsByTagName("framesetcontainer")[0]
					.appendChild(htmlEditContainer);
			}
		</script>
	</head>

	<body onload="init();">
		<framesetcontainer> </framesetcontainer>
	</body>
</html>
,
